webpackJsonp([21],{"8C8t":function(e,a){},oSoH:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=t("g3tQ"),n=t("9bgf"),r=t("mtWM"),m=t.n(r),s={name:"home",components:{Header:n.a},data:function(){return{baseUrl:"https://mall.hengleikj.com:8085/minio/upload",form:{titleOfAccount:"衡磊科技集团股份有限公司",bankOfDeposit:"交通银行合肥阜阳北路支行",bankAccount:"341329000018010023378",payAmount:this.$route.query.payAmount,commitAmount:"",paymentVoucher:[]},uploadImages:[],params:{payVoucher:[]},isSuccess:!1,freightAmountFlag:this.$route.query.freightAmountFlag}},mounted:function(){this.params=JSON.parse(this.$route.query.orderInfo),this.form.commitAmount=this.$route.query.freightAmountFlag?this.$route.query.payAmount:"",this.params.payType=3,this.params.payVoucherList=[]},methods:{onSubmit:function(){var e=this;""!==e.form.commitAmount&&0!==Number(e.form.commitAmount)?(e.params.payVoucher={commitAmount:Number(e.form.commitAmount),payVoucher:""},e.form.paymentVoucher.forEach(function(a,t){t+1===e.form.paymentVoucher.length?e.params.payVoucher.payVoucher=e.params.payVoucher.payVoucher+a.payVoucher:e.params.payVoucher.payVoucher=e.params.payVoucher.payVoucher+a.payVoucher+","}),e.form.paymentVoucher.length>0&&Number(e.form.commitAmount)<=Number(e.form.payAmount)?o.P(e.params).then(function(a){200===a.code?(e.$notify({type:"success",message:"下单成功，订单号："+e.params.orderSn}),e.$nextTick(function(){e.$router.push({path:"/user/myorders",query:{toorders:-1}})},1e3)):e.$notify({message:a.message,color:"#ad0000",background:"#ffe1e1"})}).catch(function(a){e.$notify({message:a.message,color:"#ad0000",background:"#ffe1e1"})}).finally(function(){}):e.$notify({message:"请上传付款凭证或确认付款金额",color:"#ad0000",background:"#ffe1e1"})):e.$notify({message:"请填写付款金额且金额不能为0",color:"#ad0000",background:"#ffe1e1"})},deleteRead:function(e){var a=this;a.form.paymentVoucher.forEach(function(t,o){t.payVoucher.indexOf(e.file.name)>0&&a.form.paymentVoucher.splice(o,1)})},afterRead:function(e){var a=this;e.status="uploading",e.message="上传中...";var t=new FormData;t.append("file",e.file);m.a.create({withCredentials:!0}).post(a.baseUrl,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){200===t.data.code?(e.status="",e.message="",a.params.payVoucherList.push({payVoucher:t.data.data.url}),a.form.paymentVoucher.push({payVoucher:t.data.data.url})):(e.status="failed",e.message="上传失败",a.$notify({message:t.data.message,color:"#ad0000",background:"#ffe1e1"}))}).catch(function(e){a.$notify({message:e.message,color:"#ad0000",background:"#ffe1e1"})}).finally(function(){})}}},u={render:function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",[o("Header",{attrs:{name:"对公付款"}}),e._v(" "),o("div",{staticClass:"modify-content"},[o("van-form",{on:{submit:e.onSubmit}},[o("van-field",{attrs:{disabled:"",name:"账户名称",label:"账户名称"},model:{value:e.form.titleOfAccount,callback:function(a){e.$set(e.form,"titleOfAccount",a)},expression:"form.titleOfAccount"}}),e._v(" "),o("van-field",{attrs:{disabled:"",name:"开户银行",label:"开户银行"},model:{value:e.form.bankOfDeposit,callback:function(a){e.$set(e.form,"bankOfDeposit",a)},expression:"form.bankOfDeposit"}}),e._v(" "),o("van-field",{attrs:{disabled:"",name:"银行账户",label:"银行账户"},model:{value:e.form.bankAccount,callback:function(a){e.$set(e.form,"bankAccount",a)},expression:"form.bankAccount"}}),e._v(" "),o("van-field",{attrs:{disabled:"",name:"待付金额",label:"待付金额"},model:{value:e.form.payAmount,callback:function(a){e.$set(e.form,"payAmount",a)},expression:"form.payAmount"}}),e._v(" "),o("van-field",{attrs:{name:"付款金额",disabled:e.freightAmountFlag,label:"付款金额",type:"number"},model:{value:e.form.commitAmount,callback:function(a){e.$set(e.form,"commitAmount",a)},expression:"form.commitAmount"}}),e._v(" "),o("van-field",{attrs:{name:"uploadImages",label:"付款凭证"},scopedSlots:e._u([{key:"input",fn:function(){return[o("van-uploader",{attrs:{"after-read":e.afterRead,"max-count":4},on:{delete:e.deleteRead},model:{value:e.uploadImages,callback:function(a){e.uploadImages=a},expression:"uploadImages"}})]},proxy:!0}])}),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("div",{staticStyle:{margin:"30px 0px 20px"}},[o("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",disabled:0===e.form.paymentVoucher.length}},[e._v("已付款")])],1),e._v(" "),o("div",{staticClass:"message"},[o("img",{attrs:{src:t("CpMC"),alt:""}}),e._v(" "),o("span",{staticStyle:{display:"contents"}},[e._v("公司后台审核付款凭证和确认到账后会安排发货(最多不超过四张)")])])])],1)],1)],1)},staticRenderFns:[]};var c=t("VU/8")(s,u,!1,function(e){t("8C8t")},"data-v-765ee539",null);a.default=c.exports}});
//# sourceMappingURL=21.79481a29583286d93164.js.map