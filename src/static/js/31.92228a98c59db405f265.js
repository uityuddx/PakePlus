webpackJsonp([31],{"7zGi":function(e,t){},MJ9Z:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("g3tQ"),a={components:{Header:r("9bgf").a},data:function(){return{handleNote:"",returnFreight:0,receiveNote:"",companyAddress:{province:"",city:"",region:"",town:"",detailAddress:"",name:"",phone:""},haveMsg:!1,refundType:null,updateTime:"",active:0,isOk:!0,show:!1,showCompany:!1,form:{returnId:"",deliverySn:"",deliveryCompany:""},columns:["顺丰快运","邮政快递包裹","德邦快递","德邦","京东物流","壹米滴答"],data:[],newArr:""}},mounted:function(){this.getDetailList()},methods:{goBack:function(){window.history.go(-1)},isShow:function(){this.show=!0},onSubmit:function(){var e=this;"顺丰快运"===e.form.deliveryCompany?e.form.deliveryCompany="shunfengkuaiyun":"邮政快递包裹"===e.form.deliveryCompany?e.form.deliveryCompany="youzhengguonei":"德邦快递"===e.form.deliveryCompany?e.form.deliveryCompany="debangkuaidi":"德邦"===e.form.deliveryCompany?e.form.deliveryCompany="debangwuliu":"京东物流"===e.form.deliveryCompany?e.form.deliveryCompany="jd":"壹米滴答"===e.form.deliveryCompany&&(e.form.deliveryCompany="yimidida"),n.T(e.form).then(function(t){200===t.code?(e.show=!1,e.getDetailList()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t.message)}).finally(function(){})},onCancel:function(){this.showCompany=!1},onConfirm:function(e){this.form.deliveryCompany=e,this.showCompany=!1},getPay:function(){return this.data[0].payAmount?this.data[0].returnApplyList[0].returnAmount?(this.data[0].returnApplyList[0].returnAmount+"").indexOf(".")>-1?(this.data[0].returnApplyList[0].returnAmount+"").split(".")[0]:this.data[0].returnApplyList[0].returnAmount&&this.data[0].returnApplyList[0].returnAmount.toFixed():this.data[0].returnApplyList[0].reduceIntegration&&this.data[0].returnApplyList[0].reduceIntegration.toFixed():this.newArr.returnIntegration&&this.newArr.returnIntegration.toFixed()?this.newArr.returnIntegration&&this.newArr.returnIntegration.toFixed():0},getDetailList:function(){var e=this;n.S({orderSn:e.$route.query.orderSn}).then(function(t){200===t.code?1===Number(e.$route.query.type)?t.data.forEach(function(r,n){Number(r.orderItemId)===Number(e.$route.query.ffid)?(r.orderItemId?r.orderItemId:r.orderItemId=r.orderId,r.companyAddress&&(e.companyAddress=r.companyAddress),e.receiveNote=r.reason,r.handleNote?e.handleNote=r.handleNote:e.handleNote="",e.haveMsg=!0,e.form.returnId=r.id,r.orderDetail.orderItemList=r.orderDetail.orderItemList.filter(function(t){return Number(e.$route.query.ffid)===t.id}),e.data=[r.orderDetail],e.refundType=r.type,e.newArr=r,3===r.status?e.active=-1:e.active=r.status,e.updateTime=r.updateTime):r.orderItemId||1!==t.data.length||(r.companyAddress&&(e.companyAddress=r.companyAddress),e.receiveNote=r.reason,r.handleNote?e.handleNote=r.handleNote:e.handleNote="",e.haveMsg=!0,e.form.returnId=r.id,r.orderDetail.orderItemList=r.orderDetail.orderItemList.filter(function(t){return Number(e.$route.query.ffid)===t.id}),e.data=[r.orderDetail],e.refundType=r.type,e.newArr=r,3===r.status?e.active=-1:e.active=r.status,e.updateTime=r.updateTime)}):t.data.forEach(function(t){t.orderItemId===Number(e.$route.query.ffid)&&(t.orderDetail.orderItemList=t.orderDetail.orderItemList.filter(function(t){return t.id===Number(e.$route.query.ffid)}),e.data=[t.orderDetail],e.refundType=t.type,e.newArr=t,t.handleNote?e.handleNote=t.handleNote:e.handleNote="",e.receiveNote=t.reason,3===t.status?e.active=-1:e.active=t.status,e.updateTime=t.updateTime),t.orderItemId||(e.data=[t.orderDetail],e.refundType=t.type,e.newArr=t,t.handleNote?e.handleNote=t.handleNote:e.handleNote="",e.receiveNote=t.reason,3===t.status?e.active=-1:e.active=t.status,e.updateTime=t.updateTime)}):e.$message.error(t.message)}).catch(function(t){e.$message.error(t.message)}).finally(function(){})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{name:"退款详情"}}),e._v(" "),n("div",{staticStyle:{background:"#f7f7f7"}},e._l(e.data,function(t){return n("div",{key:t.id},[n("div",{staticClass:"header-text-r"},[n("div",{staticClass:"bgImg"},[n("img",{attrs:{src:r("tHCJ"),alt:"",width:"100%",height:"160px"}})]),e._v(" "),n("div",{staticClass:"orderMsg"},[n("div",{staticClass:"ttop"},[-1===e.active?n("h1",[e._v("商家拒绝退款")]):e._e(),e._v(" "),0===e.active?n("h1",[e._v("等待商家处理")]):e._e(),e._v(" "),1===e.active?n("h1",[e._v("商家已允许退款")]):e._e(),e._v(" "),2===e.active?n("h1",[e._v("退款成功")]):e._e(),e._v(" "),0===e.active?n("p",[e._v("请您耐心等待")]):e._e(),e._v(" "),1===e.active?n("p",[e._v("请尽快邮寄回需要退货的商品")]):e._e(),e._v(" "),2===e.active?n("p",[e._v("\n              退款总金额：￥"+e._s(e.newArr.returnAmount)+"\n            ")]):e._e(),e._v(" "),-1===e.active?n("p",[e._v("商家已拒绝您的退款")]):e._e()]),e._v(" "),n("div",{staticClass:"bbottom"},[n("van-steps",{attrs:{active:e.active,"active-color":"#fd2744"}},[n("van-step",[e._v("买家申请退款")]),e._v(" "),1===e.refundType?n("van-step",[e._v("卖家处理退款申请")]):e._e(),e._v(" "),n("van-step",[e._v("退款完毕")])],1)],1)])]),e._v(" "),1===e.active?n("div",{staticClass:"backAddress"},[n("div",{staticClass:"no1"},[e._v("退款成功")]),e._v(" "),n("div",{staticClass:"no2"},[e._v("\n          请邮寄回您需要退的商品，并填写好快递单号，商家收到商品确认无人为损坏后24小时之内会安排退款\n        ")]),e._v(" "),e.companyAddress?n("div",{staticClass:"no3"},[e._v("\n          收货地址："),n("span",[e._v(e._s(e.companyAddress.province)+"-"+e._s(e.companyAddress.city)+"-"+e._s(e.companyAddress.region)+"-"+e._s(e.companyAddress.town)+"-"+e._s(e.companyAddress.detailAddress))]),n("br"),e._v("\n          收件人："),n("span",[e._v(e._s(e.companyAddress.name))]),n("br"),e._v("\n          联系电话："),n("span",[e._v(e._s(e.companyAddress.phone))]),n("br")]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"orderBody"},[n("div",{staticClass:"orderTop"},[n("p",[e._v("\n            订单号："),n("span",[e._v(e._s(t.orderSn))])])]),e._v(" "),e._l(t.orderItemList,function(r){return n("div",{key:r.id,staticClass:"orderCenter"},[n("div",{staticClass:"orderimg"},[n("van-image",{attrs:{src:r.productPic?r.productPic:""}})],1),e._v(" "),n("div",{staticClass:"orderfont"},[n("div",{staticClass:"ttop"},[e._v("\n              "+e._s(r.productName)+"\n            ")]),e._v(" "),r.productAttr?n("div",{staticClass:"shopSpecs"},e._l(JSON.parse(r.productAttr||"[]"),function(t,r){return n("div",{key:r},[e._v(e._s(t.value))])}),0):e._e(),e._v(" "),n("div",{staticClass:"bbottom"},[5===t.payType?n("div",{staticClass:"left"},[n("span",[e._v(e._s(r.productPrice))]),e._v("积分\n              ")]):n("div",{staticClass:"left"},[e._v("\n                ￥"),n("span",[e._v(e._s(r.productPrice))])]),e._v(" "),n("div",[e._v("x"+e._s(r.productQuantity))])])])])}),e._v(" "),n("div",{staticClass:"orderBottom"},[n("div",{staticClass:"moneyone"},[n("p",[e._v("退款金额"+e._s(e.newArr.returnFreight?"（含运费￥"+e.newArr.returnFreight+"）":""))]),e._v(" "),n("p",[e._v("￥"+e._s(e.newArr.returnAmount))])]),e._v(" "),e.newArr.returnVoucher?n("div",{staticClass:"moneytwo",staticStyle:{"margin-top":"15px"}},[n("p",[e._v("代金券返还金额")]),e._v(" "),n("p",[e._v("￥"+e._s(e.newArr.returnVoucher||0))])]):e._e(),e._v(" "),e.returnFreight?n("div",{staticClass:"moneytwo",staticStyle:{"margin-top":"15px"}},[n("p",[e._v("运费退还金额")]),e._v(" "),n("p",[e._v("￥"+e._s(e.returnFreight))])]):e._e(),e._v(" "),n("div",{staticClass:"moneyone",staticStyle:{"margin-top":"15px"}},[n("p",[e._v(e._s(e.newArr.orderDetail.payAmount?"扣除积分":"返还积分"))]),e._v(" "),n("p",[e._v("￥"+e._s(e.newArr.reduceIntegration))])])])],2),e._v(" "),n("div",{staticClass:"refundmsg"},[n("div",{staticClass:"title"},[e._v("退款信息")]),e._v(" "),n("div",{staticClass:"bbody"},[n("p",[e._v("\n            订单编号："),n("span",[e._v(e._s(t.orderSn))])]),e._v(" "),n("p",[e._v("\n            退款编号："),n("span",[e._v(e._s(e.newArr.returnCode))])]),e._v(" "),n("p",[e._v("\n            商家备注: "),n("span",[e._v(e._s(e.handleNote))])]),e._v(" "),n("p",[e._v("\n            买家备注："),n("span",[e._v(e._s(e.receiveNote))])]),e._v(" "),n("p",[e._v("\n            创建时间："),n("span",[e._v(e._s(t.createTime))])]),e._v(" "),2===e.active?n("p",[e._v("\n            完成时间："),n("span",[e._v(e._s(e.updateTime))])]):e._e()])]),e._v(" "),1===e.active||t.orderItemList.length>1?n("div",{staticStyle:{height:"61px"}}):n("div",{staticStyle:{height:"130px"}}),e._v(" "),1!==e.active||e.newArr.deliverySn||e.newArr.deliveryCompany?e._e():n("div",{staticClass:"numberBtn",on:{click:e.isShow}},[e._v("\n        填写快递单号\n      ")]),e._v(" "),1===e.active&&e.newArr.deliverySn&&e.newArr.deliveryCompany?n("div",{staticClass:"numberBtn",staticStyle:{background:"#dad7d7"}},[e._v("\n        填写快递单号\n      ")]):e._e(),e._v(" "),n("van-overlay",{attrs:{show:e.show},on:{click:function(t){e.show=!1}}},[n("div",{staticClass:"wrapper",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"block"},[n("p",[e._v("填写快递单号")]),e._v(" "),n("van-form",{on:{submit:e.onSubmit}},[n("img",{staticClass:"phone",attrs:{src:r("3CFJ"),alt:"",width:"20px",height:"13px"}}),e._v(" "),n("van-field",{attrs:{type:"text","right-icon":"arrow",placeholder:"请选择快递公司",disabled:"",rules:[{required:!0}]},on:{click:function(t){e.showCompany=!0}},model:{value:e.form.deliveryCompany,callback:function(t){e.$set(e.form,"deliveryCompany",t)},expression:"form.deliveryCompany"}}),e._v(" "),n("img",{staticClass:"phone",staticStyle:{left:"23px","margin-top":"13px"},attrs:{src:r("fst2"),alt:"",width:"16px",height:"18px"}}),e._v(" "),n("van-field",{attrs:{type:"text",name:"",label:"",placeholder:"请输入快递单号",rules:[{required:!0}]},model:{value:e.form.deliverySn,callback:function(t){e.$set(e.form,"deliverySn",t)},expression:"form.deliverySn"}}),e._v(" "),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{block:"",type:"info",color:"#ff4c4c","native-type":"submit"}},[e._v("确认")])],1)],1)],1)])]),e._v(" "),n("van-popup",{style:{height:"48%"},attrs:{position:"bottom"},model:{value:e.showCompany,callback:function(t){e.showCompany=t},expression:"showCompany"}},[n("van-picker",{attrs:{title:"请选择快递公司","show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:e.onCancel}})],1)],1)}),0)],1)},staticRenderFns:[]};var s=r("VU/8")(a,i,!1,function(e){r("7zGi")},"data-v-186f0f0d",null);t.default=s.exports}});
//# sourceMappingURL=31.92228a98c59db405f265.js.map