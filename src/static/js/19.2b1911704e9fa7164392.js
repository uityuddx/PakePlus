webpackJsonp([19],{CJu4:function(t,e){},GLej:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),r=a("exGp"),s=a.n(r),o=a("QX4m"),c=a("9bgf"),u=a("g3tQ"),d={name:"ProductList",components:{Service:o.a,Header:c.a},data:function(){return{newTreeList:[],productXpList:[],activeNumXp:0,loading:!1,finished:!1,newArr:[],form:{pageNum:1,pageSize:8,productCategoryId:"",type:2}}},mounted:function(){this.getNewProducts(),this.getProductListXp(this.$route.query.id)},methods:{getNewProducts:function(){var t=this;u.j().then(function(e){200===e.code?t.newTreeList=e.data:t.$notify({message:e.message,color:"#ad0000",background:"#ffe1e1"})}).catch(function(e){t.$notify({message:e.message,color:"#ad0000",background:"#ffe1e1"})})},getProductListXp:function(t){var e=this;return s()(i.a.mark(function a(){var n,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(n=e).activeNumXp=t,n.form.pageNum=1,n.form.productCategoryId=t,n.productXpList=[],a.prev=5,a.next=8,u.B(n.form);case 8:200===(r=a.sent).code?n.productXpList=r.data.list:n.$notify({message:r.message,color:"#ad0000",background:"#ffe1e1"}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(5),n.$notify({message:res.message,color:"#ad0000",background:"#ffe1e1"});case 15:case"end":return a.stop()}},a,e,[[5,12]])}))()},onLoading:function(){var t=this;u.B(t.form).then(function(e){200===e.code?e.data.list?(t.form.pageNum++,t.newArr=t.newArr.concat(e.data.list),t.productXpList=t.newArr,t.productXpList.length>=e.data.total?(t.loading=!0,t.finished=!0):t.loading=!1):t.productXpList=[]:t.$message.error(e.message)}).catch(function(e){t.$message.error(e.message)}).finally(function(){})},discountDetails:function(t,e){if(t&&e){var a=0,n=t.toString(),i=e.toString();try{a+=n.split(".")[1].length}catch(t){}try{a+=i.split(".")[1].length}catch(t){}return Number(n.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,a)}},getProductDetail:function(t){this.$router.push({path:"/market/product",query:{id:t.id}})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{name:"新品推荐"}}),t._v(" "),n("div",{directives:[{name:"ban-save",rawName:"v-ban-save"}],staticStyle:{background:"#f6f6f6","min-height":"700px",position:"relative"}},[n("van-tabs",{on:{click:t.getProductListXp},model:{value:t.activeNumXp,callback:function(e){t.activeNumXp=e},expression:"activeNumXp"}},t._l(t.newTreeList,function(e){return n("van-tab",{key:e.id,attrs:{name:e.id,title:e.name}},[t.productXpList.length>0?n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:function(e){return t.onLoading()}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("van-grid",{staticStyle:{"padding-bottom":"100px"},attrs:{border:!1,"column-num":2,gutter:10}},t._l(t.productXpList,function(e){return n("van-grid-item",{key:e.id,staticStyle:{width:"50%"},on:{click:function(a){return t.getProductDetail(e)}}},[e.memberDiscount?n("div",{staticClass:"allowance"},[t._v("享"+t._s(t.discountDetails(e.memberDiscount,10))+"折")]):t._e(),t._v(" "),n("van-image",{attrs:{src:e.pic}}),t._v(" "),n("div",{staticClass:"shopMessage"},[n("div",{staticClass:"shopTitle"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"shopOther"},[n("div",{staticClass:"tariff"},[1===e.offlineBuy?n("span",{staticStyle:{"font-size":"15px"}},[t._v("线下购买")]):n("span",[t._v("￥"+t._s(e.price))])])])])],1)}),1)],1):n("div",{staticClass:"empty"},[n("img",{attrs:{src:a("fakP"),alt:""}}),t._v(" "),n("div",{staticClass:"emptyFont"},[t._v("暂无数据")])])],1)}),1),t._v(" "),n("Service")],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,l,!1,function(t){a("CJu4")},"data-v-c826fdb8",null);e.default=p.exports}});
//# sourceMappingURL=19.2b1911704e9fa7164392.js.map