webpackJsonp([25],{BhqH:function(e,t){},JYAD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("g3tQ"),o={components:{Header:s("9bgf").a},data:function(){return{handleNote:"",companyAddress:{},orderId:0,logistics:{},orderNumber:"",haveMsg:!1,refundType:null,updateTime:"",active:0,isOk:!0,show:!1,showCompany:!1,form:{returnId:"",deliverySn:"",deliveryCompany:""},columns:["顺丰快运","邮政快递包裹","德邦快递","德邦","京东物流","壹米滴答"],data:[],newArr:"",returnMoney:"",lastTime:"00时00分00秒",isAddress:!0,company:!1}},mounted:function(){this.getDetailList()},methods:{lookLogistics:function(e){e.num?this.$router.push({path:"/user/logistics",query:{sw:a()(e)}}):this.$notify({message:"暂无该商品的物流信息",color:"#ad0000",background:"#ffe1e1"})},sureReceive:function(e){var t=this;console.log(e),this.$dialog.confirm({title:"温馨提示",message:"您确定要收货吗？"}).then(function(){var s=t;n.N({id:e}).then(function(e){200===e.code?(t.getDetailList(),s.$toast.success("收货成功")):s.$notify({message:e.message,color:"#ad0000",background:"#ffe1e1"})}).catch(function(e){s.$notify({message:e.message,color:"#ad0000",background:"#ffe1e1"})}).finally(function(){})}).catch(function(){})},countDown:function(e){clearInterval(n);var t=+new Date(e)+864e5,s=+new Date,i=(t-s)/1e3,a=this,n=setInterval(function(){if(s>=t)return clearInterval(n),"0时0分0秒";i--;var e=parseInt(i%86400/3600).toString().padStart(2,"0"),o=parseInt(i%3600/60).toString().padStart(2,"0"),r=parseInt(i%60).toString().padStart(2,"0");a.lastTime=e+"时"+o+"分"+r+"秒"},1e3);return a.lastTime},goBack:function(){window.history.go(-1)},isShow:function(){this.show=!0},onSubmit:function(){var e=this;"顺丰快运"===e.form.deliveryCompany?e.form.deliveryCompany="shunfengkuaiyun":"邮政快递包裹"===e.form.deliveryCompany?e.form.deliveryCompany="youzhengguonei":"德邦快递"===e.form.deliveryCompany?e.form.deliveryCompany="debangkuaidi":"德邦"===e.form.deliveryCompany?e.form.deliveryCompany="debangwuliu":"京东物流"===e.form.deliveryCompany?e.form.deliveryCompany="jd":"壹米滴答"===e.form.deliveryCompany&&(e.form.deliveryCompany="yimidida"),n.T(e.form).then(function(t){200===t.code?(e.show=!1,e.getDetailList()):e.$message.error(t.message)}).catch(function(t){e.$message.error(t.message)}).finally(function(){})},onCancel:function(){this.showCompany=!1},onConfirm:function(e){this.form.deliveryCompany=e,this.showCompany=!1},getDetailList:function(){var e=this;n.S({orderSn:e.$route.query.orderSn}).then(function(t){200===t.code?t.data.forEach(function(t){if(t.orderItemId===Number(e.$route.query.id)){e.data=[t],e.active=t.status,e.companyAddress=t.companyAddress,e.handleNote=t.handleNote,e.form.returnId=t.id,t.orderDetail.orderItemList.forEach(function(s){s.id===Number(e.$route.query.id)&&(t.orderDetail.orderItemList=[s],e.returnMoney=s.productPrice)}),t.orderDetail.returnApplyList.forEach(function(t){t.orderItemId===Number(e.$route.query.id)&&(t.deliveryCompany?e.company=t.deliveryCompany:e.company=!1)});var s=t.exchangeOrderDetail;!1===e.company?e.isAddress=!0:e.isAddress=!1,e.orderNumber=s?s.orderSn:t.orderSn,e.orderId=s?s.id:0,s?(e.logistics.com=s.deliveryCompany,e.logistics.num=s.deliverySn,e.logistics.phone=s.receiverPhone):e.logistics={}}}):e.$message.error(t.message)}).catch(function(t){e.$message.error(t.message)}).finally(function(){})}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Header",{attrs:{name:"换货详情"}}),e._v(" "),i("div",{staticStyle:{background:"#f7f7f7"}},e._l(e.data,function(t){return i("div",{key:t.id},[i("div",{staticClass:"header-text-e"},[i("div",{staticClass:"bgImg"},[i("img",{attrs:{src:s("tHCJ"),alt:"",width:"100%",height:"160px"}})]),e._v(" "),i("div",{staticClass:"orderMsg"},[i("div",{staticClass:"ttop"},[3===e.active?i("h1",[e._v("商家拒绝换货")]):e._e(),e._v(" "),0===e.active?i("h1",[e._v("等待商家处理")]):e._e(),e._v(" "),1===e.active&&e.isAddress?i("h1",[e._v("商家已允许换货")]):e._e(),e._v(" "),1!==e.active||e.isAddress?e._e():i("h1",[e._v("等待商家确认收货")]),e._v(" "),4===e.active?i("h1",[e._v("商家已收到商品，等待商家重新发货")]):e._e(),e._v(" "),5===e.active?i("h1",[e._v("商家已发货")]):e._e(),e._v(" "),2===e.active?i("h1",[e._v("换货成功")]):e._e(),e._v(" "),0===e.active?i("p",[e._v("还剩"+e._s(e.countDown(t.createTime))+"完成, 请耐心等待")]):e._e(),e._v(" "),1===e.active&&e.isAddress?i("p",[e._v("请尽快邮寄回需要换货的商品")]):e._e(),e._v(" "),1!==e.active||e.isAddress?e._e():i("p",[e._v("等商家确认收货后将安排新的商品寄出")]),e._v(" "),4===e.active?i("p",[e._v("等待商家重新发货")]):e._e(),e._v(" "),5===e.active?i("p",[e._v("请及时关注快递信息")]):e._e(),e._v(" "),2===e.active?i("p",[e._v("快递单号："+e._s(e.logistics.num))]):e._e(),e._v(" "),3===e.active?i("p",[e._v("商家已拒绝您的换货")]):e._e()]),e._v(" "),i("div",{staticClass:"bbottom"},[i("van-steps",{attrs:{active:e.active,"active-color":"#fd2744"}},[i("van-step",[e._v("买家申请换货")]),e._v(" "),i("van-step",[e._v("换货中")]),e._v(" "),2!=e.active?i("van-step",{staticStyle:{display:"none"}}):e._e(),e._v(" "),2!=e.active?i("van-step",{staticStyle:{display:"none"}}):e._e(),e._v(" "),2!=e.active?i("van-step",{staticStyle:{display:"none"}}):e._e(),e._v(" "),2!=e.active?i("van-step",{staticStyle:{display:"none"}}):e._e(),e._v(" "),i("van-step",[e._v("换货成功")])],1)],1)])]),e._v(" "),1===e.active?i("div",{staticClass:"backAddress"},[i("div",{staticClass:"no1"},[e._v("换货成功")]),e._v(" "),i("div",{staticClass:"no2"},[e._v("\n          请邮寄回您需要换货的商品，并填写好快递单号，商家收到商品确认无人为损坏后24小时之内会安排换货\n        ")]),e._v(" "),e.companyAddress?i("div",{staticClass:"no3"},[e._v("\n          收货地址："),i("span",[e._v(e._s(e.companyAddress.province)+"-"+e._s(e.companyAddress.city)+"-"+e._s(e.companyAddress.region)+"-"+e._s(e.companyAddress.town)+"-"+e._s(e.companyAddress.detailAddress))]),i("br"),e._v("\n          收件人："),i("span",[e._v(e._s(e.companyAddress.name))]),i("br"),e._v("\n          联系电话："),i("span",[e._v(e._s(e.companyAddress.phone))]),i("br")]):e._e()]):e._e(),e._v(" "),i("div",{staticClass:"orderBody"},[i("div",{staticClass:"orderTop"},[i("p",[e._v("\n            订单号："),i("span",[e._v(e._s(t.orderSn))])])]),e._v(" "),e._l(t.orderDetail.orderItemList,function(s){return i("div",{key:s.id,staticClass:"orderCenter"},[i("div",{staticClass:"orderimg"},[i("van-image",{attrs:{src:s.productPic?s.productPic:""}})],1),e._v(" "),i("div",{staticClass:"orderfont"},[i("div",{staticClass:"ttop"},[e._v("\n              "+e._s(s.productName)+"\n            ")]),e._v(" "),s.productAttr?i("div",{staticClass:"shopSpecs"},e._l(JSON.parse(s.productAttr||"[]"),function(t,s){return i("div",{key:s},[e._v(e._s(t.value))])}),0):e._e(),e._v(" "),i("div",{staticClass:"bbottom"},[5===t.orderDetail.payType?i("div",{staticClass:"left"},[i("span",[e._v(e._s(s.productPrice))]),e._v("积分\n              ")]):i("div",{staticClass:"left"},[e._v("\n                ￥"),i("span",[e._v(e._s(s.productPrice))])]),e._v(" "),i("div",[e._v("x"+e._s(t.productCount))])])])])})],2),e._v(" "),i("div",{staticClass:"refundmsg"},[i("div",{staticClass:"title"},[e._v("换货信息")]),e._v(" "),i("div",{staticClass:"bbody"},[i("p",[e._v("\n            订单编号："),i("span",[e._v(e._s(e.orderNumber))])]),e._v(" "),i("p",[e._v("\n            换货编号："),i("span",[e._v(e._s(t.returnCode))])]),e._v(" "),i("p",[e._v("\n            商家备注："),i("span",[e._v(e._s(e.handleNote))])]),e._v(" "),i("p",[e._v("\n            买家备注："),i("span",[e._v(e._s(t.reason))])]),e._v(" "),i("p",[e._v("\n            创建时间："),i("span",[e._v(e._s(t.createTime))])]),e._v(" "),2===e.active?i("p",[e._v("\n            完成时间："),i("span",[e._v(e._s(t.updateTime))])]):e._e(),e._v(" "),5===e.active||2===e.active?i("p",[e._v("\n            快递单号："),i("span",[e._v(e._s(e.logistics.num))]),e._v(" "),i("span",{staticClass:"lookLogistics",on:{click:function(t){return e.lookLogistics(e.logistics)}}},[e._v("查看物流")])]):e._e()])]),e._v(" "),1===e.active&&5===e.active?i("div",{staticStyle:{height:"61px"}}):i("div",{staticStyle:{height:"130px"}}),e._v(" "),1===e.active&&e.isAddress?i("div",{staticClass:"numberBtn",on:{click:e.isShow}},[e._v("\n        填写快递单号\n      ")]):e._e(),e._v(" "),1!==e.active||e.isAddress?e._e():i("div",{staticClass:"numberBtn",staticStyle:{background:"#dad7d7"}},[e._v("\n        已写快递单号\n      ")]),e._v(" "),5===e.active?i("div",{staticClass:"numberBtn",on:{click:function(t){return e.sureReceive(e.orderId)}}},[e._v("\n        确认收货\n      ")]):e._e(),e._v(" "),i("van-overlay",{attrs:{show:e.show},on:{click:function(t){e.show=!1}}},[i("div",{staticClass:"wrapper",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"block"},[i("p",[e._v("填写快递单号")]),e._v(" "),i("van-form",{on:{submit:e.onSubmit}},[i("img",{staticClass:"phone",attrs:{src:s("3CFJ"),alt:"",width:"20px",height:"13px"}}),e._v(" "),i("van-field",{attrs:{type:"text","right-icon":"arrow",placeholder:"请选择快递公司",disabled:"",rules:[{required:!0}]},on:{click:function(t){e.showCompany=!0}},model:{value:e.form.deliveryCompany,callback:function(t){e.$set(e.form,"deliveryCompany",t)},expression:"form.deliveryCompany"}}),e._v(" "),i("img",{staticClass:"phone",staticStyle:{left:"23px","margin-top":"13px"},attrs:{src:s("fst2"),alt:"",width:"16px",height:"18px"}}),e._v(" "),i("van-field",{attrs:{type:"text",name:"",label:"",placeholder:"请输入快递单号",rules:[{required:!0}]},model:{value:e.form.deliverySn,callback:function(t){e.$set(e.form,"deliverySn",t)},expression:"form.deliverySn"}}),e._v(" "),i("div",{staticStyle:{margin:"16px"}},[i("van-button",{attrs:{block:"",type:"info",color:"#ff4c4c","native-type":"submit"}},[e._v("确认")])],1)],1)],1)])]),e._v(" "),i("van-popup",{style:{height:"48%"},attrs:{position:"bottom"},model:{value:e.showCompany,callback:function(t){e.showCompany=t},expression:"showCompany"}},[i("van-picker",{attrs:{title:"请选择快递公司","show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:e.onCancel}})],1)],1)}),0)],1)},staticRenderFns:[]};var c=s("VU/8")(o,r,!1,function(e){s("BhqH")},"data-v-417961be",null);t.default=c.exports}});
//# sourceMappingURL=25.4036c1db652d66f9ddfc.js.map