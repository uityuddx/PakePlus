webpackJsonp([28],{RVyL:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{apply:"",path:"",WsUrl:"wss://mall.hengleikj.com:8085/ws/",orderNum:this.$route.query.orderNum,socket:""}},mounted:function(){var e=this,t=localStorage.getItem("html");e.apply=t,e.$nextTick(function(){document.forms[0].submit()}),e.socket&&e.socket.onclose&&(e.socket.onclose=e.close()),e.path=e.WsUrl+e.orderNum+"?Authorization=Bearer "+localStorage.getItem("token"),console.log("URL======>"+e.path),e.init()},methods:{init:function(){"undefined"==typeof WebSocket?alert("您的浏览器不支持socket"):(this.socket=new WebSocket(this.path),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage)},open:function(){console.log("socket连接成功")},error:function(){console.log("连接错误")},getMessage:function(e){console.log("1",e.data),console.log("2",e),-1!==e.data.indexOf("orderSn")&&"success"===JSON.parse(e.data).payStatus&&this.$router.push({path:"/user/paySuccess",query:{orderNum:JSON.parse(e.data).orderSn}})},send:function(){this.socket.send()},close:function(){console.log("socket已经关闭")}},destroyed:function(){this.socket&&this.socket.onclose&&(this.socket.onclose=this.close())}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("div",{domProps:{innerHTML:this._s(this.apply)}})])},staticRenderFns:[]};var c=o("VU/8")(s,n,!1,function(e){o("reMo")},"data-v-365f2348",null);t.default=c.exports},reMo:function(e,t){}});
//# sourceMappingURL=28.54787c6605aa77c87284.js.map