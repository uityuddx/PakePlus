webpackJsonp([16],{KItN:function(e,t,o){e.exports=o.p+"static/img/logo.b5eea43.png"},Nz1P:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),a=o.n(r),s=o("g3tQ"),n={data:function(){return{ruleForm:{phone:"",password:"",code:""},wxUrl:"https://mall.hengleikj.com/user/help/index"}},mounted:function(){var e=navigator.userAgent;if(this.isWeixin=!!/MicroMessenger/i.test(e),this.isWeixin&&!this.$route.query.code){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx372e6d05b22ce032&redirect_uri="+this.wxUrl+"&response_type=code&scope=snsapi_base&state="+a()({name:"login",url:"/market/home/index"})+"#wechat_redirect"}},methods:{toprivacy:function(){this.$router.push({path:"/user/privacyP"})},touserAgm:function(){this.$router.push({path:"/user/userAgm"})},submitForm:function(){var e=this;e.$route.query.code&&(e.ruleForm.code=e.$route.query.code),s.C(e.ruleForm).then(function(t){if(200===t.code)console.log("=====>login",t.data),localStorage.getItem("token")?(localStorage.removeItem("token"),localStorage.removeItem("openId"),localStorage.setItem("openId",t.data.openId),localStorage.setItem("token",t.data.token)):(localStorage.setItem("token",t.data.token),localStorage.setItem("openId",t.data.openId),localStorage.setItem("urlPath","/user/home")),localStorage.getItem("urlPath")?"/market/product"===localStorage.getItem("urlPath")?e.$router.push({path:localStorage.getItem("urlPath"),query:{id:localStorage.getItem("urlValue")}}):e.$router.push({path:localStorage.getItem("urlPath")}):e.$router.push({path:"/market/home"});else if(1001===t.code&&"code失效"===t.message){e.$toast({message:t.message,icon:"warning-o"});window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx372e6d05b22ce032&redirect_uri="+e.wxUrl+"&response_type=code&scope=snsapi_base&state="+a()({name:"login",url:"/market/home/index"})+"#wechat_redirect"}else e.$toast({message:t.message,icon:"warning-o"})}).catch(function(t){e.$toast({message:t.message,icon:"warning-o"})}).finally(function(){})},toforgetpsd:function(){this.$router.push({path:"/user/forget/index"})},toregister:function(){this.$router.push({path:"/user/register/index"})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"logo"},[r("img",{attrs:{src:o("KItN"),alt:""}})]),e._v(" "),r("div",{staticClass:"loginbody"},[r("van-form",{on:{submit:e.submitForm}},[r("img",{staticClass:"phone",attrs:{src:o("fCu3"),alt:""}}),e._v(" "),r("van-field",{attrs:{clearable:"",name:"用户名",placeholder:"请输入手机号码",rules:[{required:!0}]},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}}),e._v(" "),r("img",{staticClass:"password",attrs:{src:o("PbnE"),alt:""}}),e._v(" "),r("van-field",{attrs:{type:"password",clearable:"",name:"密码",placeholder:"请输入密码",rules:[{required:!0}]},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}}),e._v(" "),r("div",{staticStyle:{margin:"46px 6.6% 0px"}},[r("van-button",{attrs:{color:"#ff4c4c",block:"",type:"info","native-type":"submit"}},[e._v("登录")])],1)],1)],1),e._v(" "),r("div",{staticClass:"loginbtm"},[r("p",{on:{click:e.toforgetpsd}},[e._v("忘记密码")]),e._v(" "),r("p",{on:{click:e.toregister}},[e._v("新用户注册")])]),e._v(" "),r("div",{staticClass:"rules"},[e._v("\n    继续即代表你同意"),r("span",{on:{click:e.touserAgm}},[e._v("《用户协议》")]),e._v("和"),r("span",{on:{click:e.toprivacy}},[e._v("《隐私政策》")])])])},staticRenderFns:[]};var l=o("VU/8")(n,i,!1,function(e){o("pVty")},"data-v-1a886ce3",null);t.default=l.exports},pVty:function(e,t){}});
//# sourceMappingURL=16.2df0d8555d34b7bfc5aa.js.map